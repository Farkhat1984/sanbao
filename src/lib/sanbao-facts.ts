/**
 * Historical facts about Zheng He (Ma Sanbao) — displayed during AI loading
 * Source: https://en.wikipedia.org/wiki/Zheng_He
 */
export const SANBAO_FACTS: readonly { title: string; text: string }[] = [
  {
    title: "Имя «Саньбао»",
    text: "Чжэн Хэ получил почётное имя «Саньбао Тайцзянь» — «Евнух Трёх Сокровищ». Три сокровища — это Будда, Дхарма и Сангха в буддизме.",
  },
  {
    title: "Семь великих экспедиций",
    text: "С 1405 по 1433 год Чжэн Хэ совершил семь морских экспедиций, посетив более 30 стран — от Юго-Восточной Азии до Восточной Африки.",
  },
  {
    title: "Крупнейшие деревянные корабли",
    text: "Его «корабли-сокровищницы» достигали 120 метров в длину — это самые большие деревянные суда в истории мореплавания.",
  },
  {
    title: "Флот из 300 кораблей",
    text: "Первая экспедиция 1405 года насчитывала более 300 кораблей и 27 000 человек — крупнейший флот в истории до XX века.",
  },
  {
    title: "Происхождение",
    text: "Чжэн Хэ родился в мусульманской семье хуэй в провинции Юньнань. Его прадед и дед совершали хадж в Мекку.",
  },
  {
    title: "Жирафы для императора",
    text: "Из Африки Чжэн Хэ привёз жирафов ко двору императора Юнлэ. Китайцы приняли их за мифического единорога «цилинь» — символ удачи.",
  },
  {
    title: "Навигационные технологии",
    text: "Флот Чжэн Хэ использовал магнитный компас, звёздные карты и водонепроницаемые отсеки — передовые технологии XV века.",
  },
  {
    title: "Дипломат, а не завоеватель",
    text: "В отличие от европейских колонизаторов, Чжэн Хэ устанавливал торговые и дипломатические отношения, а не завоёвывал территории.",
  },
  {
    title: "Храмы в Юго-Восточной Азии",
    text: "В Малайзии, Индонезии и Таиланде до сих пор стоят храмы, посвящённые Чжэн Хэ — он почитается как покровитель моряков.",
  },
  {
    title: "Малакка и морской путь",
    text: "Чжэн Хэ сделал Малакку ключевым портом на морском Шёлковом пути, установив там китайскую торговую факторию.",
  },
  {
    title: "Детство адмирала",
    text: "В возрасте 10 лет будущий адмирал был захвачен в плен армией Мин. Он вырос при дворе принца Чжу Ди, будущего императора Юнлэ.",
  },
  {
    title: "Доверие императора",
    text: "Император Юнлэ настолько доверял Чжэн Хэ, что назначил его командующим всего флота — беспрецедентная честь для того времени.",
  },
  {
    title: "Аравийский полуостров",
    text: "Чжэн Хэ посетил Аден, Джидду и Ормуз — крупнейшие торговые порты Аравии, установив прямые связи между Китаем и арабским миром.",
  },
  {
    title: "Восточная Африка",
    text: "Флот достигал Могадишо и побережья Кении — за 80 лет до того, как Васко да Гама обогнул Африку с запада.",
  },
  {
    title: "Борьба с пиратами",
    text: "Во время экспедиций Чжэн Хэ разгромил флот пирата Чэнь Цзуи в Малаккском проливе, обеспечив безопасность торговых путей.",
  },
  {
    title: "Каменные стелы",
    text: "Перед последним путешествием Чжэн Хэ установил каменные стелы в Фуцзяни с описанием своих экспедиций — бесценный исторический источник.",
  },
  {
    title: "Конец эпохи экспедиций",
    text: "После смерти Чжэн Хэ в 1433 году Китай закрыл границы. Его корабли были уничтожены, а записи о путешествиях сожжены чиновниками.",
  },
  {
    title: "600-летие",
    text: "В 2005 году Китай отметил 600-летие первого плавания Чжэн Хэ. Его экспедиции считаются символом мирной дипломатии Китая.",
  },
  {
    title: "Водонепроницаемые отсеки",
    text: "Корабли Чжэн Хэ имели до 16 водонепроницаемых отсеков — технология, которую Европа освоила только через 300 лет.",
  },
  {
    title: "Моряков кормили по-царски",
    text: "На кораблях выращивали бобовые ростки для профилактики цинги — за столетия до того, как европейцы открыли причину этой болезни.",
  },
  {
    title: "Цейлон и буддизм",
    text: "Чжэн Хэ посетил Цейлон (Шри-Ланку) и оставил трёхъязычную стелу на китайском, тамильском и персидском — знак уважения ко всем культурам.",
  },
  {
    title: "Рекорды экспедиций",
    text: "За 28 лет семь экспедиций покрыли более 50 000 км морских путей — от Нанкина до Мозамбика.",
  },
  {
    title: "Почему «Чжэн Хэ»?",
    text: "Имя Чжэн Хэ было дано императором Юнлэ после битвы при Чжэнлунба, где молодой воин проявил выдающуюся храбрость.",
  },
  {
    title: "Торговый обмен",
    text: "Флот привозил шёлк, фарфор и чай, а возвращался с пряностями, драгоценными камнями, слоновой костью и экзотическими животными.",
  },
  {
    title: "Наследие мореплавателя",
    text: "Сегодня именем Чжэн Хэ названы улицы, мосты и корабли в Китае, Малайзии, Индонезии и других странах Азии.",
  },
] as const;

/**
 * Get a random fact, avoiding recently shown ones.
 * Returns null if all facts have been shown recently.
 */
export function getRandomFact(shownIndices: Set<number>): { index: number; fact: typeof SANBAO_FACTS[number] } | null {
  const available = SANBAO_FACTS
    .map((fact, index) => ({ fact, index }))
    .filter(({ index }) => !shownIndices.has(index));

  if (available.length === 0) return null;

  const pick = available[Math.floor(Math.random() * available.length)];
  return pick;
}
